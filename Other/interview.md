## JavaScript

### 如何理解 JS 的异步？

JS 是一门单线程的语言，这是因为它运行在浏览器的渲染主线程中，而渲染主线程只有一个。

而渲染主线程承担着诸多的工作，渲染页面、执行 JS 都在其中运行。

如果使用同步的方式，就极有可能导致主线程产生阻塞，从而导致消息队列中很多其它任务无法得到执行。这样一来，一方面会导致繁忙的主线程白白的消耗时间，另一方面导致页面无法及时更新，给用户造成卡死现象。

所以浏览器采用异步的方式来避免。具体做法是当某些任务发生时，比如计时器、网络请求、事件监听等，主线程会将任务交给其它线程去处理，自身立即结束任务的执行，从而执行后续代码。当其它线程完成时，将事先传递的回调函数包装成任务，加入到消息队列的末尾排队，等待主线程调度执行。

这种异步模式下，浏览器永不阻塞，从而最大限度的保证了单线程的流畅运行。

![202208101048899](./assets/interview/202208101048899.png)

## HTML & CSS

### 什么是 reflow（重排）

reflow 是指浏览器重新计算文档的布局，当进行了会影响布局树的操作后（如改变元素的宽高，或者添加新的元素时），就会发生 reflow。reflow 会导致文档的所有元素重新计算其布局，这可能会导致性能下降。

为了避免连续的多次操作导致布局树反复计算，浏览器会合并这些操作，当 JS 代码全部完成后再进行统一计算。所以，改动属性造成的 reflow 是异步完成的。

因此当 JS 获取布局属性时，就可能造成无法获取到最新的布局信息。浏览器在反复权衡下，最终决定获取属性立即 reflow。

### 什么是 repaint（重绘）

repaint 是指浏览器重新绘制文档。当改动了文档的可见样式后（如元素的颜色或背景色），就会引发repaint。

因为元素的布局信息也属于可见样式，所以 reflow 一定会引起 repaint。

reflow 和 repaint 可能会导致性能下降，为了提高性能，应该尽量避免不必要的 reflow 和 repaint

## 网络

### 描述一下从输入网址到页面展示出来，中间都经历了哪些过程，越详细越好

当输入一个网址并按下回车时，浏览器会开始执行以下步骤：

1. 域名解析：浏览器会先检查缓存中是否有域名的IP地址，如果没有，则向DNS服务器发送DNS查询，DNS服务器将域名对应的IP地址返回给浏览器；
2. 建立连接：一旦获取网站IP地址，浏览器会尝试与该IP地址的服务器建立TCP连接；
3. 发送请求：一旦连接建立成功，浏览器会发送HTTP请求，以获取服务器的响应；
4. 处理请求：服务器接收HTTP请求并对其进行处理。如果页面存在，服务器将生成HTTP响应并将其发送回浏览器；
5. 接收响应：浏览器接收HTTP响应后，会解析响应并执行一下操作：
   - 检查响应状态码（例如200表示成功），以确定是否成功获取了所需的资源。
   - 解析响应头（Response Headers），其中包括一些元数据，如内容类型、缓存策略等。
   - 解析响应体（Response Body），这是服务器返回给浏览器的实际内容，如HTML代码、图像、视频等。
6. 显示内容：浏览器接收到完整的响应后，会将内容解析并展示在页面中。

